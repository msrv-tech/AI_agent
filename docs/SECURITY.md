# Безопасность

Агент выполняет действия в рамках прав текущего пользователя 1С. Дополнительно предусмотрены ограничения на запись.

## Режим Запрос1С (только чтение)

Тип диалога **ИИА_ТипДиалога.Запрос1С** запрещает все действия изменения данных:

- **Запрещённые действия:** CreateReference, SetField, Write, Delete
- **Разрешённые:** GetMetadata, GetObjectFields, CheckObjectExists, RunQuery, ShowInfo, SelectObject (чтение)

Проверка выполняется в **ИИА_DSL** перед выполнением сценария. При нарушении возвращается ошибка `read_only_violation`.

Режим предназначен для безопасных запросов к данным без риска изменения.

## Ограничение записи в настройках пользователей

Регистр сведений **ИИА_НастройкиПользователей** содержит ресурс **ДоступнаЗапись**:

- **ДоступнаЗапись = Ложь** — запрещаются действия CreateReference, SetField, Write даже в режиме «Агент»
- **ДоступнаЗапись = Истина** (по умолчанию) — запись разрешена

Проверка выполняется в **ИИА_Сервер** при вызове DSL (ВыполнитьDSLСценарийССообщениями, ВыполнитьDSLСценарийБезСообщений) и в **ИИА_DSL** при определении флага `ТолькоЧтение`.

Настройка позволяет ограничить конкретных пользователей только чтением, не меняя тип диалога.

## Общие принципы

- Агент не имеет привилегированных режимов — все операции выполняются от имени текущего пользователя с учётом RLS
- Валидация данных: агент не может выводить данные, которые не были успешно получены из базы (защита от галлюцинаций)
