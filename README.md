# ИИ-Агент для 1С:Предприятие

Интеллектуальный агент, интегрированный в платформу 1С, предназначенный для автоматизации работы с данными через естественный язык. Агент работает в режиме планирования: сначала составляет план действий, а затем последовательно его выполняет. Агент способен самостоятельно исследовать метаданные конфигурации, строить запросы и выполнять действия в базе данных.

**Основная идея:** агент выполняет работу за вас. В режиме предприятия для него можно собрать весь необходимый контекст — метаданные, RAG-индекс, история диалога — и он будет решать задачи в вашей конфигурации.

**Провайдеры ИИ:** поддерживаются любые OpenAI-совместимые провайдеры. Приоритет отдаётся [Gitsell](https://gitsell.ru) как основному провайдеру (регистрация, выбор моделей, обновление расширения).

## Основные возможности

*   **Естественный язык:** Общение с базой данных 1С на человеческом языке.
*   **Режим планирования:** Прозрачное выполнение задач через составление и обновление плана действий.
*   **Discovery Метаданных:** Умный поиск объектов (справочников, документов) с использованием RAG и встроенной карты синонимов 1С.
*   **Генерация запросов:** Автоматическое построение и выполнение запросов на языке 1С.
*   **Автопилот:** Проактивное исследование структуры объектов (получение реквизитов) при обнаружении подходящих кандидатов.
*   **Умная обработка ошибок:** Автоматическое исправление DSL-сценариев и динамическая подстройка параметров модели (Temperature) при возникновении трудностей.
*   **Оптимизация контекста (Context Saver):** Агрессивное сжатие истории диалога и очистка от избыточных данных метаданных для работы в крупных конфигурациях (ERP, УТ 11, КА).

## Подробная документация

| Раздел | Описание |
|--------|----------|
| [Планирование](docs/PLANNING.md) | Как агент составляет и выполняет план действий |
| [DSL](docs/DSL.md) | Язык команд для взаимодействия с 1С |
| [Серверный движок](docs/SERVER_ENGINE.md) | Фоновые задания, механизм серверных уведомлений, общий модуль оркестратор |
| [Логирование](docs/LOGGING.md) | Сохранение в регистр сведений, сохранение в файл для отладки |
| [RAG](docs/RAG.md) | Полное описание RAG-поиска по метаданным |
| [Безопасность](docs/SECURITY.md) | Ограничение на запись для режима Запрос1С, ограничение в настройках пользователей |
| [Тестирование](docs/TESTING.md) | Запуск тестов с ИИ и без, фиктивные вызовы (моки), COM, BSL-линтер |
| [Запуск через COM (CLI)](automation/com_1c/README.md) | Выполнение запросов и диалогов без GUI |
| [Линтер BSL](automation/BSL-README.md) | Статический анализ кода с помощью BSL Language Server |
| [Планы развития](docs/PLANS.md) | Мультимодальность, веб-поиск и др. |

## Архитектура

Проект состоит из нескольких ключевых модулей:

*   **ИИА_Сервер:** Оркестратор работы агента, управление диалогами и логикой исправления ошибок.
*   **ИИА_Оркестратор:** Серверный цикл — планирование, выполнение DSL, проверка результата.
*   **ИИА_DSL:** Интерпретатор JSON-команд (Domain Specific Language), выполняющий действия в среде 1С.
*   **ИИА_Метаданные:** Модуль для работы со структурой конфигурации и поиска объектов.
*   **ИИА_Промты:** Генератор системных инструкций и динамического контекста (State Summary, RAG).
*   **ИИА_Провайдеры:** Интеграция с внешними LLM (OpenAI-совместимые, приоритет Gitsell).

Подробная схема работы доступна в [docs/AGENT_ARCHITECTURE.md](docs/AGENT_ARCHITECTURE.md).

## Безопасность

*   **Read-Only режим:** Режим «Запрос1С» и настройка «ДоступнаЗапись» в настройках пользователей.
*   **Валидация данных:** Защита от галлюцинаций — агент не может выводить данные, которые не были успешно получены из базы.

Подробнее: [docs/SECURITY.md](docs/SECURITY.md).

## Установка и настройка

*(Здесь будет описание процесса установки расширения и настройки API-ключей)*
