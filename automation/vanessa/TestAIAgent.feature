#language: ru

Функционал: Тестирование ИИ Агента

Контекст:
    Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Отправка сообщения в ИИ и проверка ответа
    Когда Я открываю общую форму "ИИА_Агент"
    Тогда открылось окно 'Агент'
    И в поле с именем 'ТекущийТекст' я ввожу текст 'Привет, это тестовое сообщение'
    И я нажимаю на кнопку с именем 'Отправить'
    И я жду '15' секунд
    Тогда в таблице с именем 'СообщенияФормы' количество строк больше '0'
    И в таблице с именем 'СообщенияФормы' в колонке 'Текст' последняя строка содержит текст 'Привет'
    И Я закрываю все окна клиентского приложения
    И Я закрываю сеанс 1С

Сценарий: Создание контрагента через ИИ
    Когда Я открываю общую форму "ИИА_Агент"
    Тогда открылось окно 'Агент'
    И в поле с именем 'ТекущийТекст' я ввожу текст 'Создай контрагента ООО Тестовая Компания'
    И я нажимаю на кнопку с именем 'Отправить'
    И я жду '30' секунд
    Тогда в таблице с именем 'СообщенияФормы' количество строк больше '1'
    И в таблице с именем 'СообщенияФормы' в колонке 'ТипСообщения' последняя строка содержит значение 'Код'
    И в таблице с именем 'СообщенияФормы' в колонке 'ТекстКода' последняя строка содержит текст 'dsl_version'
    И Я закрываю все окна клиентского приложения
    И Я закрываю сеанс 1С

Сценарий: Проверка выполнения DSL-сценария
    Когда Я открываю общую форму "ИИА_Агент"
    Тогда открылось окно 'Агент'
    И в поле с именем 'ТекущийТекст' я ввожу текст 'Создай контрагента ООО Ромашка'
    И я нажимаю на кнопку с именем 'Отправить'
    И я жду '30' секунд
    Тогда в таблице с именем 'СообщенияФормы' количество строк больше '2'
    И в таблице с именем 'СообщенияФормы' в колонке 'Автор' есть строка со значением 'Система'
    И в таблице с именем 'СообщенияФормы' в колонке 'Текст' есть строка содержащая текст 'DSL-сценарий выполнен'
    И Я закрываю все окна клиентского приложения
    И Я закрываю сеанс 1С

Сценарий: Полный цикл работы с ИИ - создание и проверка результата
    Когда Я открываю общую форму "ИИА_Агент"
    Тогда открылось окно 'Агент'
    И в поле с именем 'ТекущийТекст' я ввожу текст 'Создай контрагента с наименованием ООО Автотест'
    И я нажимаю на кнопку с именем 'Отправить'
    И я жду '30' секунд
    Тогда в таблице с именем 'СообщенияФормы' количество строк больше '2'
    И в таблице с именем 'СообщенияФормы' в колонке 'ТипСообщения' есть строка со значением 'Код'
    И в таблице с именем 'СообщенияФормы' в колонке 'ТекстКода' есть строка содержащая текст 'CreateReference'
    И в таблице с именем 'СообщенияФормы' в колонке 'Автор' есть строка со значением 'Система'
    И в таблице с именем 'СообщенияФормы' в колонке 'Текст' есть строка содержащая текст 'выполнен'
    И Я закрываю все окна клиентского приложения
    И Я закрываю сеанс 1С

