# Тесты для ИИ Агента

Этот файл содержит тесты Vanessa Automation для проверки функциональности ИИ Агента.

## Файлы

- `TestAIAgent.feature` - файл с тестами в формате Gherkin для Vanessa Automation

## Описание тестов

### 1. Отправка сообщения в ИИ и проверка ответа
- Открывает форму ИИ Агента
- Вводит тестовое сообщение
- Отправляет сообщение
- Проверяет, что получен ответ от ИИ

### 2. Создание контрагента через ИИ
- Открывает форму ИИ Агента
- Отправляет запрос на создание контрагента
- Проверяет, что ИИ сгенерировал DSL-сценарий
- Проверяет наличие JSON с DSL в ответе

### 3. Проверка выполнения DSL-сценария
- Открывает форму ИИ Агента
- Отправляет запрос на создание контрагента
- Проверяет, что DSL-сценарий был выполнен
- Проверяет наличие системных сообщений о результате выполнения

### 4. Полный цикл работы с ИИ - создание и проверка результата
- Комплексный тест, проверяющий весь цикл:
  - Отправка запроса
  - Генерация DSL
  - Выполнение DSL
  - Получение результата

## Запуск тестов

### Через PowerShell скрипт

Используйте существующий скрипт `update-and-run-vanessa.ps1`, указав файл теста:

```powershell
.\update-and-run-vanessa.ps1 -FeatureFile ".\TestAIAgent.feature"
```

### Прямой запуск через Vanessa

1. Откройте 1С:Предприятие в режиме тестирования
2. Загрузите обработку `vanessa-automation-single.epf`
3. Укажите путь к файлу `TestAIAgent.feature`
4. Запустите выполнение сценариев

## Требования

- Настроенное подключение к GigaChat API (в регистре сведений `ИИА_НастройкиПользователей`)
- Наличие справочника `Контрагенты` в конфигурации
- Достаточное время ожидания для ответа от ИИ (тесты ждут до 30 секунд)

## Примечания

- Тесты могут занимать длительное время из-за ожидания ответа от ИИ
- Убедитесь, что у вас есть валидные настройки подключения к GigaChat
- Тесты проверяют наличие текста в ответах, поэтому могут быть чувствительны к изменениям в формулировках ИИ

