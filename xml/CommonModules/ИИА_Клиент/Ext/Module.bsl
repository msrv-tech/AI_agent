#Область ПрограммныйИнтерфейс

// Находит или создает диалог текущего пользователя
//
// Возвращаемое значение:
//  СправочникСсылка.ИИА_Диалоги - ссылка на диалог
//
Функция НайтиИлиСоздатьДиалогПользователя() Экспорт
	
	Возврат ИИА_ВызовСервера.НайтиИлиСоздатьДиалогПользователя(ТекущийПользователь());
	
КонецФункции

// Создает новый диалог для текущего пользователя
//
// Возвращаемое значение:
//  СправочникСсылка.ИИА_Диалоги - ссылка на новый диалог
//
Функция СоздатьНовыйДиалог() Экспорт
	
	Возврат ИИА_ВызовСервера.СоздатьНовыйДиалог(ТекущийПользователь());
	
КонецФункции

Функция ТекущийПользователь() Экспорт
	Возврат "Админ";
КонецФункции

// Загружает все сообщения диалога
//
// Параметры:
//  СсылкаДиалога - СправочникСсылка.ИИА_Диалоги - ссылка на диалог
//
// Возвращаемое значение:
//  Массив - массив структур с сообщениями
//
Функция ЗагрузитьСообщенияДиалога(СсылкаДиалога) Экспорт
	
	МассивСообщений = ИИА_ВызовСервера.ПолучитьСообщенияДиалога(СсылкаДиалога, 0);
	
	Возврат МассивСообщений;
	
КонецФункции

// Отправляет сообщение и получает ответ от ИИ
//
// Параметры:
//  СсылкаДиалога - СправочникСсылка.ИИА_Диалоги - ссылка на диалог
//  ТипСообщения - Строка - тип сообщения ("Чат" или "Запрос")
//  Текст - Строка - текст сообщения
//
// Возвращаемое значение:
//  Структура - структура ответа от сервера (содержит Usage и другую информацию)
//
Функция ОтправитьСообщение(СсылкаДиалога, ТипСообщения, Текст) Экспорт
	
	Результат = ИИА_ВызовСервера.ОтправитьСообщениеСервера(СсылкаДиалога, ТипСообщения, Текст);
	
	Возврат Результат;
	
КонецФункции

// Проверяет запрос 1С
//
// Параметры:
//  ТекстЗапроса - Строка - текст запроса
//
// Возвращаемое значение:
//  Структура - структура результата:
//   * Успех - Булево - успешность выполнения
//   * Сообщение - Строка - текст ошибки или пусто
//
Функция ПроверитьЗапрос(ТекстЗапроса) Экспорт
	
	Результат = ИИА_ВызовСервера.ПроверитьЗапрос(ТекстЗапроса);
	
	Возврат Результат;
	
КонецФункции

// Выполняет DSL-сценарий
//
// Параметры:
//  СсылкаДиалога - СправочникСсылка.ИИА_Диалоги - ссылка на диалог
//  DSLJSON - Строка - JSON с DSL командами
//
// Возвращаемое значение:
//  Структура - структура результата выполнения DSL
//
Функция ВыполнитьDSLСценарий(СсылкаДиалога, DSLJSON) Экспорт
	
	Результат = ИИА_ВызовСервера.ВыполнитьDSLСценарий(СсылкаДиалога, DSLJSON);
	
	Возврат Результат;
	
КонецФункции

// Обработка результата DSL перенесена в обработчик ожидания СпланироватьСледующиеШаги в форме ИИА_Агент

#КонецОбласти


